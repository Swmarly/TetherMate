<Window x:Class="TetherMate.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="TetherMate"
        Height="720"
        Width="1080"
        MinHeight="640"
        MinWidth="980">
  <Window.Resources>
    <Style x:Key="CardStyle" TargetType="Border">
      <Setter Property="Background" Value="{StaticResource SurfaceBrush}" />
      <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}" />
      <Setter Property="BorderThickness" Value="1" />
      <Setter Property="CornerRadius" Value="14" />
      <Setter Property="Effect" Value="{StaticResource CardShadowEffect}" />
      <Setter Property="Padding" Value="16" />
    </Style>
  </Window.Resources>

  <Grid Margin="24">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
      <RowDefinition Height="280" />
    </Grid.RowDefinitions>

    <Border Style="{StaticResource CardStyle}" Grid.Row="0" Margin="0,0,0,20">
      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <StackPanel>
          <TextBlock Text="TetherMate" FontSize="28" FontWeight="SemiBold" />
          <TextBlock Text="Automatic gnirehtet manager" Foreground="{StaticResource TextSecondaryBrush}" FontSize="14" Margin="0,6,0,0" />
        </StackPanel>
        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
          <Border Background="{StaticResource AccentBrush}" CornerRadius="12" Padding="10,4" Margin="0,0,12,0">
            <TextBlock Text="Connected" Foreground="White" FontSize="12" FontWeight="SemiBold" />
          </Border>
          <Border Background="{StaticResource HighlightBrush}" CornerRadius="12" Padding="10,4">
            <TextBlock Text="USB Ready" Foreground="{StaticResource TextPrimaryBrush}" FontSize="12" FontWeight="SemiBold" />
          </Border>
        </StackPanel>
      </Grid>
    </Border>

    <Grid Grid.Row="1" Margin="0,0,0,20">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="2*" />
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="*" />
      </Grid.ColumnDefinitions>

      <Border Style="{StaticResource CardStyle}" Grid.Column="0" Margin="0,0,16,0">
        <StackPanel>
          <TextBlock Text="Target device" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" />
          <ComboBox ItemsSource="{Binding Devices}"
                    SelectedItem="{Binding SelectedDevice}"
                    DisplayMemberPath="DisplayName"
                    Margin="0,10,0,0" />
        </StackPanel>
      </Border>

      <Border Style="{StaticResource CardStyle}" Grid.Column="1" Margin="0,0,16,0">
        <StackPanel>
          <TextBlock Text="ADB" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" />
          <TextBlock Text="{Binding AdbStatus}" FontSize="16" FontWeight="SemiBold" Margin="0,10,0,0" />
        </StackPanel>
      </Border>

      <Border Style="{StaticResource CardStyle}" Grid.Column="2" Margin="0,0,16,0">
        <StackPanel>
          <TextBlock Text="Device" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" />
          <TextBlock Text="{Binding DeviceStatus}" FontSize="16" FontWeight="SemiBold" Margin="0,10,0,0" />
        </StackPanel>
      </Border>

      <Border Style="{StaticResource CardStyle}" Grid.Column="3">
        <StackPanel>
          <TextBlock Text="gnirehtet" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" />
          <TextBlock Text="{Binding GnirehtetStatus}" FontSize="16" FontWeight="SemiBold" Margin="0,10,0,0" />
        </StackPanel>
      </Border>
    </Grid>

    <GroupBox Header="Connected ADB devices" Grid.Row="2">
      <DataGrid ItemsSource="{Binding Devices}" AutoGenerateColumns="False" CanUserAddRows="False" IsReadOnly="True">
        <DataGrid.Columns>
          <DataGridTextColumn Header="Serial" Binding="{Binding Serial}" Width="2*" />
          <DataGridTextColumn Header="State" Binding="{Binding State}" Width="*" />
          <DataGridTextColumn Header="Manufacturer" Binding="{Binding Manufacturer}" Width="*" />
          <DataGridTextColumn Header="Model" Binding="{Binding Model}" Width="*" />
          <DataGridTextColumn Header="Product" Binding="{Binding Product}" Width="*" />
        </DataGrid.Columns>
      </DataGrid>
    </GroupBox>

    <Grid Grid.Row="3" Margin="0,20,0,0">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="260" />
        <ColumnDefinition Width="*" />
      </Grid.ColumnDefinitions>

      <Border Style="{StaticResource CardStyle}" Grid.Column="0" Margin="0,0,16,0">
        <StackPanel>
          <TextBlock Text="Manual controls" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" />
          <Button Content="Start" Command="{Binding StartCommand}" Margin="0,12,0,0" Height="38" />
          <Button Content="Stop" Command="{Binding StopCommand}" Margin="0,10,0,0" Height="38" Style="{StaticResource SecondaryButtonStyle}" />
          <Button Content="Restart" Command="{Binding RestartCommand}" Margin="0,10,0,0" Height="38" Style="{StaticResource SecondaryButtonStyle}" />
          <CheckBox Content="Stop gnirehtet on app exit"
                    IsChecked="{Binding StopOnExit}"
                    Margin="0,18,0,0" />
        </StackPanel>
      </Border>

      <GroupBox Header="Event log" Grid.Column="1">
        <ListBox ItemsSource="{Binding LogEntries}">
          <ListBox.ItemTemplate>
            <DataTemplate>
              <TextBlock Text="{Binding Display}" TextWrapping="Wrap" Foreground="{StaticResource TextSecondaryBrush}" />
            </DataTemplate>
          </ListBox.ItemTemplate>
        </ListBox>
      </GroupBox>
    </Grid>
  </Grid>
</Window>
